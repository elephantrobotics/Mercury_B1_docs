## 机械臂的控制

### 1 滑块控制

打开一个ROS1环境终端，然后运行命令：

```bash
roslaunch mercury_b1 slider_control.launch
```

它将打开 rviz 和一个滑块组件，你将看到如下画面：

<img src =../../resources/11-ApplicationBaseROS/image/mercuryB1_slider_control.png
width ="800"  align = "center">

接着你可以通过拖动滑块来控制 rviz 中的模型移动。如果你想让真实的 Mercury B1 跟着一起运动，需要再打开一个ROS1环境终端，然后运行命令：

```bash
rosrun mercury_b1 slider_control.py
```

**请注意：由于在命令输入的同时机械臂会移动到模型目前的位置，在您使用命令之前请确保rviz中的模型没有出现穿模现象**
**不要在连接机械臂后做出快速拖动滑块的行为，防止机械臂损坏**

### 2 模型跟随

除了上面的控制，我们也可以让模型跟随真实的机械臂运动。打开一个ROS1环境终端，然后运行命令：

```bash
rosrun mercury_b1 follow_display.py
```

然后打开另一个ROS1环境终端，然后运行命令：

```bash
roslaunch mercury_b1 mercury_follow.launch
```

它将打开 rviz 展示模型跟随效果。

<img src =../../resources/11-ApplicationBaseROS/image/mercuryB1_follow.png
width ="800"  align = "center">

### 3 Moveit使用

`mercury_b1` 现已集成了 MoveIt 部分。

打开一个ROS1环境终端，然后运行命令：

```bash
roslaunch mercury_b1_moveit mercury_b1.launch
``` 

如果需要让真实的机械臂同步执行计划，需要再打开一个ROS1环境终端，然后运行命令：

```bash
rosrun mercury_b1_moveit sync_plan.py
```

Moveit 的控制组有三个，运行效果如下：

**1.左臂控制组：** 通过拖动轨迹球来规划左臂的运动方向，再执行规划。

<img src =../../resources/11-ApplicationBaseROS/image/mercuryB1_moveit_left.png
width ="800"  align = "center">

**2.右臂控制组：** 通过拖动轨迹球来规划右臂的运动方向，再执行规划。

<img src =../../resources/11-ApplicationBaseROS/image/mercuryB1_moveit_right.png
width ="800"  align = "center">

**3.腰部控制组：** 可以通过设置目标姿态，再执行规划。

<img src =../../resources/11-ApplicationBaseROS/image/mercuryB1_moveit_body.png
width ="800"  align = "center">

---

[← 上一页](11.1.3-RvizIntroduction.md) | [下一节 →](../11.2-ROS2/README.md)